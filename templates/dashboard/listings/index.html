{% extends "dashboard/base.html" %}

{% block dashboard_title %}Listings{% endblock %}

{% block dashboard_content %}
<header class="ev-dashboard__header">
    <h1>Your listings</h1>
    <a class="ev-btn ev-btn--primary" href="{% url 'dashboard:create' %}">New listing</a>
</header>

<form method="get" class="ev-dashboard__filters">
    <label>
        <span>Status</span>
        <select name="status" hx-get="{% url 'dashboard:index' %}" hx-target="#listing-table" hx-trigger="change" hx-push-url="true">
            <option value="" {% if not request.GET.status %}selected{% endif %}>All</option>
            {% for value, label in status_choices %}
                <option value="{{ value }}" {% if request.GET.status == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </label>
</form>

<div class="ev-table-wrapper">
    {% include "dashboard/listings/partials/list_table.html" %}
</div>
{% endblock %}
